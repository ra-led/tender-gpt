<!DOCTYPE html><html lang="ru"><head>    <meta charset="UTF-8">    <title>Статистика — TenderAI</title>    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    <style>        .profile-section { background: #fff; border-radius: 8px; padding:20px; margin-bottom: 32px;}        .tab-bar {margin-bottom: 32px;}        .tab-bar a {padding:10px 20px; border-radius:6px; text-decoration:none; background:#F6F6F9; color:#333;}        .tab-bar .active {background:#346AF3; color:#fff;}        .field-label {font-size:14px; color:#666;}        .field-val {margin-bottom:12px; font-size:16px;}    </style></head><body><div class="container">    <div class="header">        <h1>Tender<span class="highlight">AI</span></h1>    </div>    <div class="tab-bar">        <a href="{{ url_for('client_template_stat', client_id=client_id, template_id=template_id) }}" class="active">Статистика</a>        <a href="{{ url_for('dashboard', client_id=client_id) }}?template_id={{ template_id }}">Отчеты</a>    </div>    <div class="profile-section">        <h2>Профиль поиска</h2>        {% for k,v in template.items() %}            <div class="field-label">{{ k|replace('_', ' ')|capitalize }}</div>            <div class="field-val">{{ v }}</div>        {% endfor %}    </div>    <div>        <h2>Динамика по дням</h2>        <canvas id="statChart" width="800" height="320"></canvas>        <div style="color:#666; margin-top:8px">            <span style="color:#346AF3;">■</span> Поиск по ключевым словам             <span style="color:#00CC99; margin-left:20px;">■</span> Подтвердила AI-проверка        </div>    </div></div><script>    const data = {{ chart_data|tojson }};    const ctx = document.getElementById('statChart').getContext('2d');    new Chart(ctx, {        type: 'bar',        data: {            labels: data.map(x => x.date.slice(5)), // show mm-dd            datasets: [                {                    label: 'Ключевые слова',                    data: data.map(x => x.kw_count),                    backgroundColor: '#346AF3',                    barThickness: 40,  // Explicit width for consistency                },                {                    label: 'AI-подтверждено',                    data: data.map(x => x.ai_count),                    backgroundColor: '#00CC99',                    barThickness: 40,  // Match width for alignment                }            ]        },        options: {            responsive: true,            plugins: {                legend: {                     position: 'top',                    labels: {                        boxWidth: 12  // Compact legend color indicators                    }                }            },            scales: {                x: {                     stacked: false,  // Disable stacking to show bars side-by-side                    grid: { display: false }  // Cleaner X-axis                },                y: {                     stacked: false,                     beginAtZero: true,                    ticks: {                        precision: 0  // Force whole numbers on Y-axis                    }                }            },            // Ensure bars are grouped by date (default behavior)            interaction: {                mode: 'index',                intersect: false            }        }    });</script></body></html>